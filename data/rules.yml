version: "3.1"

rules:

- rule: Say 'I am a bot' anytime the user challenges
  steps:
  - intent: bot_challenge
  - action: utter_iamabot


- rule: convo start
  conversation_start: true
  steps:
  - action: utter_greet
  - action: utter_do_you_need_help


- rule: Sign up rule
  steps:
  - intent: ask_create_an_account
  - action: utter_sign_UP

- rule: Form Activate
  steps:
  - intent: ask_list_all
  - action: list_events_form
  - active_loop: list_events_form

- rule: From Activate 2
  steps:
  - action: utter_do_you_need_help
  - intent: affirm
  - action: list_events_form
  - active_loop: list_events_form

- rule: Run action
  steps:
  - action: list_events_form
  - slot_was_set:
    - requested_slot: null
  - active_loop: null  # Deactivate the form
  - action: action_event_search_criteria
  - action: action_clear_event_filters
  - action: utter_ask_event_name
  - action: action_listen

- rule: reset slots
  steps:
  - action: action_event_search_criteria
  - action: action_clear_event_filters

- rule: more info
  steps:
  - action: utter_ask_event_name
  - intent: event_inform
  - slot_was_set:
    - event_name: Global Village
  - action: utter_what_info_need





# - rule: Activate Pizza Form
#   steps:
#   - intent: buy_pizza
#   - action: simple_pizza_form
#   - active_loop: simple_pizza_form

# - rule: Submit Pizza Form
#   condition:
#   - active_loop: simple_pizza_form
#   steps:
#   - action: simple_pizza_form
#   - active_loop: null
#   - slot_was_set:
#     - requested_slot: null
#   - action: utter_submit
#   - action: utter_pizza_slots

# - rule: Interruption in Pizza Form
#   condition:
#   # Condition that form is active.
#   - active_loop: simple_pizza_form
#   steps:
#   # This unhappy path handles the case of an intent `bot_challenge`.
#   - intent: bot_challenge
#   - action: utter_iamabot
#   # Return to form after handling the `bot_challenge` intent
#   - action: simple_pizza_form
#   - active_loop: simple_pizza_form

# - rule: Activate Fancy Pizza Form
#   steps:
#   - intent: buy_fancy_pizza
#   - action: fancy_pizza_form
#   - active_loop: fancy_pizza_form

# - rule: Submit Fancy Pizza Form
#   condition:
#   - active_loop: fancy_pizza_form
#   steps:
#   - action: fancy_pizza_form
#   - active_loop: null
#   - slot_was_set:
#     - requested_slot: null
#   - action: utter_submit
#   - action: utter_pizza_slots

