version: "3.1"

rules:

- rule: Say 'I am a bot' anytime the user challenges
  steps:
  - intent: bot_challenge
  - action: utter_iamabot

- rule: greet
  steps:
  - action: utter_greet
  - action: utter_looking_for

- rule: 2greet
  steps:
  - intent: greet
  - action: utter_greet
  - action: utter_looking_for


- rule: convo start
  conversation_start: true
  steps:
  - action: utter_greet
  - action: utter_looking_for


- rule: Sign up rule
  steps:
  - intent: ask_create_an_account
  - action: utter_sign_UP

- rule: Form Activate
  steps:
  - intent: ask_list_all
  - action: list_events_form
  - active_loop: list_events_form

- rule: From Activate 2
  steps:
  - action: utter_do_you_need_help
  - intent: affirm
  - action: list_events_form
  - active_loop: list_events_form

- rule: Run action
  steps:
  - action: list_events_form
  - slot_was_set:
    - requested_slot: null
  - active_loop: null  # Deactivate the form
  - action: action_event_search_criteria
  - action: action_clear_event_filters
  - action: utter_ask_event_name
  - action: action_listen

- rule: reset slots
  steps:
  - action: action_event_search_criteria
  - action: action_clear_event_filters

- rule: more info
  steps:
  - action: action_give_istop_buttons
  - intent: event_inform
  - slot_was_set:
    - event_name: Global Village
  - action: utter_what_info_need

- rule: more info
  steps:
  - action: utter_ask_event_name
  - intent: event_inform
  - slot_was_set:
    - event_name: Global Village
  - action: utter_what_info_need

# - rule: give dates
#   steps:
#   - intent: ask_eventdate_by_name
#   - action: action_get_event_date

- rule: give Location
  steps:
  - intent: ask_eventlocation_by_name
  - action: action_get_event_location

- rule: trying somtehing
  steps:
  - action: utter_what_info_need
  - intent: ask_eventlocation_by_name
  - action: action_get_event_location
  - action: utter_what_info_need  # Add this line to show utter_what_info_need again
  - action: action_listen 

- rule: trying somtehing2
  steps:
  - intent: ask_eventdate_by_name
  - action: action_get_event_date
  - action: utter_what_info_need  # Add this line to show utter_what_info_need again

- rule: trying somtehing 3
  steps:
  - intent: ask_to_buy_ticket
  - action: action_get_ticket_types

- rule: add to cart sam3
  steps:
  - action: action_get_ticket_types
  - intent: give_ticket_type
  - slot_was_set:
    - ticket_type: First Class
  - action: utter_ticket_quantity

- rule: addto cart sam4
  steps:
  - action: utter_ticket_quantity
  - intent: give_ticket_quantity
  - slot_was_set:
    - ticket_quantity: '3'
  - action: utter_add_to_cart

- rule: addto cart sam4
  steps:
  - action: utter_ticket_quantity
  - intent: give_ticket_quantity
  - slot_was_set:
    - ticket_quantity: '3'
  - action: utter_add_to_cart

- rule: more informationnn
  steps:
  - intent: ask_more_info
  - action: utter_what_info_need

- rule: more informationnn 2
  steps:
  - intent: ask_more_info
  - action: utter_what_info_need

- rule: new events
  steps:
  - action: utter_checkout_new_events
  - intent: affirm
  - action: action_list_top_events

- rule: another rule
  steps:
  - action: action_give_istop_buttons
  - intent: event_inform
  - slot_was_set:
    - event_name: Sharjah International Book Fair
  - action: utter_what_info_need

- rule: another rule
  steps:
  - action: utter_ask_event_name
  - intent: event_inform
  - slot_was_set:
    - event_name: Sharjah International Book Fair
  - action: utter_what_info_need
# - rule: Activate Pizza Form
#   steps:
#   - intent: buy_pizza
#   - action: simple_pizza_form
#   - active_loop: simple_pizza_form

# - rule: Submit Pizza Form
#   condition:
#   - active_loop: simple_pizza_form
#   steps:
#   - action: simple_pizza_form
#   - active_loop: null
#   - slot_was_set:
#     - requested_slot: null
#   - action: utter_submit
#   - action: utter_pizza_slots

# - rule: Interruption in Pizza Form
#   condition:
#   # Condition that form is active.
#   - active_loop: simple_pizza_form
#   steps:
#   # This unhappy path handles the case of an intent `bot_challenge`.
#   - intent: bot_challenge
#   - action: utter_iamabot
#   # Return to form after handling the `bot_challenge` intent
#   - action: simple_pizza_form
#   - active_loop: simple_pizza_form

# - rule: Activate Fancy Pizza Form
#   steps:
#   - intent: buy_fancy_pizza
#   - action: fancy_pizza_form
#   - active_loop: fancy_pizza_form

# - rule: Submit Fancy Pizza Form
#   condition:
#   - active_loop: fancy_pizza_form
#   steps:
#   - action: fancy_pizza_form
#   - active_loop: null
#   - slot_was_set:
#     - requested_slot: null
#   - action: utter_submit
#   - action: utter_pizza_slots

